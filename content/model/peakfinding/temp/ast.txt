Module(body=[Import(names=[alias(name='xmltodict')]), Import(names=[alias(name='numpy', asname='np')]), Import(names=[alias(name='peakutils.peak', asname='find_peaks')]), Import(names=[alias(name='sys')]), FunctionDef(name='peak_finding', args=arguments(posonlyargs=[], args=[arg(arg='input')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Expr(value=Constant(value='\n    :param input: Path to XRDML file.\n    :return: Peaklist with positions and intensities\n    ')), Assign(targets=[Tuple(elts=[Name(id='x', ctx=Store()), Name(id='y', ctx=Store())], ctx=Store())], value=Call(func=Name(id='detect_x_y', ctx=Load()), args=[Name(id='input', ctx=Load())], keywords=[])), Assign(targets=[Name(id='peaks', ctx=Store())], value=Call(func=Attribute(value=Name(id='find_peaks', ctx=Load()), attr='indexes', ctx=Load()), args=[Call(func=Attribute(value=Name(id='np', ctx=Load()), attr='array', ctx=Load()), args=[Name(id='y', ctx=Load())], keywords=[])], keywords=[keyword(arg='thres', value=BinOp(left=Constant(value=0.02), op=Div(), right=Call(func=Name(id='max', ctx=Load()), args=[Name(id='y', ctx=Load())], keywords=[]))), keyword(arg='min_dist', value=Constant(value=150))])), Assign(targets=[Name(id='peak_position', ctx=Store())], value=List(elts=[], ctx=Load())), Assign(targets=[Name(id='peak_intensity', ctx=Store())], value=List(elts=[], ctx=Load())), For(target=Name(id='peak', ctx=Store()), iter=Name(id='peaks', ctx=Load()), body=[Assign(targets=[Name(id='position', ctx=Store())], value=Call(func=Name(id='format', ctx=Load()), args=[Subscript(value=Name(id='x', ctx=Load()), slice=Name(id='peak', ctx=Load()), ctx=Load()), Constant(value='.4f')], keywords=[])), Assign(targets=[Name(id='intensity', ctx=Store())], value=Call(func=Name(id='format', ctx=Load()), args=[Subscript(value=Name(id='y', ctx=Load()), slice=Name(id='peak', ctx=Load()), ctx=Load()), Constant(value='.2f')], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='peak_position', ctx=Load()), attr='append', ctx=Load()), args=[Name(id='position', ctx=Load())], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='peak_intensity', ctx=Load()), attr='append', ctx=Load()), args=[Name(id='intensity', ctx=Load())], keywords=[]))], orelse=[]), Return(value=Tuple(elts=[Name(id='peak_position', ctx=Load()), Name(id='peak_intensity', ctx=Load())], ctx=Load()))], decorator_list=[]), FunctionDef(name='detect_x_y', args=arguments(posonlyargs=[], args=[arg(arg='input')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='f', ctx=Store())], value=Call(func=Name(id='open', ctx=Load()), args=[Name(id='input', ctx=Load())], keywords=[keyword(arg='mode', value=Constant(value='r')), keyword(arg='encoding', value=Constant(value='utf-8'))])), Assign(targets=[Name(id='dic', ctx=Store())], value=Call(func=Attribute(value=Name(id='xmltodict', ctx=Load()), attr='parse', ctx=Load()), args=[Call(func=Attribute(value=Name(id='f', ctx=Load()), attr='read', ctx=Load()), args=[], keywords=[])], keywords=[])), Assign(targets=[Name(id='dp', ctx=Store())], value=Subscript(value=Subscript(value=Subscript(value=Subscript(value=Name(id='dic', ctx=Load()), slice=Constant(value='xrdMeasurements'), ctx=Load()), slice=Constant(value='xrdMeasurement'), ctx=Load()), slice=Constant(value='scan'), ctx=Load()), slice=Constant(value='dataPoints'), ctx=Load())), Assign(targets=[Name(id='y', ctx=Store())], value=Subscript(value=Subscript(value=Name(id='dp', ctx=Load()), slice=Constant(value='intensities'), ctx=Load()), slice=Constant(value='#text'), ctx=Load())), Assign(targets=[Name(id='y', ctx=Store())], value=Call(func=Name(id='list', ctx=Load()), args=[Call(func=Name(id='map', ctx=Load()), args=[Name(id='float', ctx=Load()), Call(func=Attribute(value=Name(id='y', ctx=Load()), attr='split', ctx=Load()), args=[], keywords=[])], keywords=[])], keywords=[])), If(test=Compare(left=Call(func=Name(id='type', ctx=Load()), args=[Subscript(value=Name(id='dp', ctx=Load()), slice=Constant(value='positions'), ctx=Load())], keywords=[]), ops=[Eq()], comparators=[Name(id='list', ctx=Load())]), body=[Assign(targets=[Name(id='sp', ctx=Store())], value=Call(func=Name(id='float', ctx=Load()), args=[Subscript(value=Subscript(value=Subscript(value=Name(id='dp', ctx=Load()), slice=Constant(value='positions'), ctx=Load()), slice=Constant(value=0), ctx=Load()), slice=Constant(value='startPosition'), ctx=Load())], keywords=[])), Assign(targets=[Name(id='ep', ctx=Store())], value=Call(func=Name(id='float', ctx=Load()), args=[Subscript(value=Subscript(value=Subscript(value=Name(id='dp', ctx=Load()), slice=Constant(value='positions'), ctx=Load()), slice=Constant(value=0), ctx=Load()), slice=Constant(value='endPosition'), ctx=Load())], keywords=[]))], orelse=[Assign(targets=[Name(id='sp', ctx=Store())], value=Call(func=Name(id='float', ctx=Load()), args=[Subscript(value=Subscript(value=Name(id='dp', ctx=Load()), slice=Constant(value='positions'), ctx=Load()), slice=Constant(value='startPosition'), ctx=Load())], keywords=[])), Assign(targets=[Name(id='ep', ctx=Store())], value=Call(func=Name(id='float', ctx=Load()), args=[Subscript(value=Subscript(value=Name(id='dp', ctx=Load()), slice=Constant(value='positions'), ctx=Load()), slice=Constant(value='endPosition'), ctx=Load())], keywords=[]))]), Assign(targets=[Name(id='x', ctx=Store())], value=Call(func=Attribute(value=Name(id='np', ctx=Load()), attr='arange', ctx=Load()), args=[Name(id='sp', ctx=Load()), Name(id='ep', ctx=Load()), BinOp(left=BinOp(left=Name(id='ep', ctx=Load()), op=Sub(), right=Name(id='sp', ctx=Load())), op=Div(), right=Call(func=Name(id='len', ctx=Load()), args=[Name(id='y', ctx=Load())], keywords=[]))], keywords=[])), Return(value=Tuple(elts=[Name(id='x', ctx=Load()), Name(id='y', ctx=Load())], ctx=Load()))], decorator_list=[]), FunctionDef(name='main', args=arguments(posonlyargs=[], args=[], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='input', ctx=Store())], value=Subscript(value=Attribute(value=Name(id='sys', ctx=Load()), attr='argv', ctx=Load()), slice=Constant(value=1), ctx=Load())), Assign(targets=[Tuple(elts=[Name(id='x', ctx=Store()), Name(id='y', ctx=Store())], ctx=Store())], value=Call(func=Name(id='peak_finding', ctx=Load()), args=[Name(id='input', ctx=Load())], keywords=[])), Expr(value=Call(func=Name(id='print', ctx=Load()), args=[Name(id='x', ctx=Load())], keywords=[])), Expr(value=Call(func=Name(id='print', ctx=Load()), args=[Name(id='y', ctx=Load())], keywords=[]))], decorator_list=[]), If(test=Compare(left=Name(id='__name__', ctx=Load()), ops=[Eq()], comparators=[Constant(value='__main__')]), body=[Expr(value=Call(func=Name(id='main', ctx=Load()), args=[], keywords=[]))], orelse=[])], type_ignores=[])